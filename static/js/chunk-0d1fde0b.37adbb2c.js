(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d1fde0b"],{"13d5":function(t,e,a){"use strict";var s=a("23e7"),r=a("d58f").left,i=a("a640"),n=a("ae40"),l=i("reduce"),u=n("reduce",{1:0});s({target:"Array",proto:!0,forced:!l||!u},{reduce:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"27c8":function(t,e,a){},6360:function(t,e,a){"use strict";a("27c8")},"865d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{directives:[{name:"show",rawName:"v-show",value:t.isShowCategoryList,expression:"isShowCategoryList"}]},[a("CategorySelector",{attrs:{forbidden:t.isAddOrEditProperty},on:{changeCategory:t.changeCategory}})],1),a("el-card",{staticStyle:{margin:"20px 0"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isSKUForm&&!t.isSPUForm,expression:"!isSKUForm && !isSPUForm"}]},[t.$hasBtn("btn.Spu.add")?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:!t.category3Id},on:{click:t.clickAddEditSPU}},[t._v("添加SPU")]):t._e(),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.records,border:""}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"80"}}),a("el-table-column",{attrs:{prop:"spuName",label:"SPU名称",width:"width"}}),a("el-table-column",{attrs:{prop:"description",label:"SPU描述",width:"width"}}),a("el-table-column",{attrs:{label:"操作",width:"width"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t.$hasBtn("btn.Spu.addsku")?a("MyButton",{attrs:{title:"添加SKU",type:"success",icon:"el-icon-plus",size:"mini"},on:{click:function(e){return t.clickAddSKU(s)}}}):t._e(),t.$hasBtn("btn.Spu.update")?a("MyButton",{attrs:{title:"修改SPU",type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(e){return t.clickEditSPU(s)}}}):t._e(),t.$hasBtn("btn.Spu.skus")?a("MyButton",{attrs:{title:"查看SKU列表",type:"info",icon:"el-icon-info",size:"mini"},on:{click:function(e){return t.showSPUList(s)}}}):t._e(),a("el-popconfirm",{attrs:{title:"确定删除"+s.spuName+"吗?"},on:{onConfirm:function(e){return t.deleteSpu(s.id)}}},[t.$hasBtn("btn.Spu.delete")?a("MyButton",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",title:"删除SPU",type:"danger",icon:"el-icon-delete",size:"mini"},slot:"reference"}):t._e()],1)]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{total:t.total,"current-page":t.page,"page-size":t.limit,"page-sizes":[3,6,9],layout:" prev, pager, next, jumper,->,sizes,total"},on:{"current-change":t.getAttrList,"size-change":t.changeLimit}})],1),a("SPUForm",{directives:[{name:"show",rawName:"v-show",value:t.isSPUForm,expression:"isSPUForm"}],ref:"spu",attrs:{visible:t.isSPUForm},on:{"update:visible":function(e){t.isSPUForm=e},successBack:t.successBackSPU,cancelBack:t.cancelBackSPU}}),a("SKUForm",{directives:[{name:"show",rawName:"v-show",value:t.isSKUForm,expression:"isSKUForm"}],ref:"sku",attrs:{visible:t.isSKUForm},on:{"update:visible":function(e){t.isSKUForm=e}}}),a("el-dialog",{attrs:{title:t.selectSPU.spuName+"的SKU列表",visible:t.showSKUInfoDialog,"before-close":t.handelCloseDialog},on:{"update:visible":function(e){t.showSKUInfoDialog=e}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.skuAttrInfo}},[a("el-table-column",{attrs:{prop:"skuName",label:"名称",width:"width"}}),a("el-table-column",{attrs:{prop:"price",label:"价格(元)",width:"width"}}),a("el-table-column",{attrs:{prop:"weight",label:"重量(KG)",width:"width"}}),a("el-table-column",{attrs:{label:"默认图片",width:"width"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.skuDefaultImg,alt:""}})]}}])})],1)],1)],1)],1)},r=[],i=a("c7eb"),n=a("1da1"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{attrs:{model:t.spuForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"SPU名称"}},[a("el-input",{attrs:{placeholder:"SPU名称"},model:{value:t.spuForm.spuName,callback:function(e){t.$set(t.spuForm,"spuName",e)},expression:"spuForm.spuName"}})],1),a("el-form-item",{attrs:{label:"品牌"}},[a("el-select",{attrs:{placeholder:"请选择品牌"},model:{value:t.spuForm.tmId,callback:function(e){t.$set(t.spuForm,"tmId",e)},expression:"spuForm.tmId"}},t._l(t.trademarkList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.tmName,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"SPU描述"}},[a("el-input",{attrs:{type:"textarea",placeholder:"SPU描述",rows:"4"},model:{value:t.spuForm.description,callback:function(e){t.$set(t.spuForm,"description",e)},expression:"spuForm.description"}})],1),a("el-form-item",{attrs:{label:"SPU图片"}},[a("el-upload",{attrs:{action:"/dev-api/admin/product/fileUpload","list-type":"picture-card","on-success":t.upfileSuccess,"on-preview":t.handlePictureCardPreview,"file-list":t.spuImageList,"on-remove":t.handleRemove}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),a("el-form-item",{attrs:{label:"销售属性"}},[a("el-select",{attrs:{placeholder:t.unUsedSpuSaleAttrList.length>0?"还有"+t.unUsedSpuSaleAttrList.length+"未选择":"没有啦!"},model:{value:t.spuSaleAttrIdAndName,callback:function(e){t.spuSaleAttrIdAndName=e},expression:"spuSaleAttrIdAndName"}},t._l(t.unUsedSpuSaleAttrList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id+":"+t.name}})})),1),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:!t.spuSaleAttrIdAndName},on:{click:t.addAttrValue}},[t._v("添加销售属性")]),a("el-table",{staticStyle:{width:"100%",margin:"20px 0"},attrs:{border:"",data:t.spuForm.spuSaleAttrList}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"80"}}),a("el-table-column",{attrs:{prop:"saleAttrName",label:"属性名",width:"150"}}),a("el-table-column",{attrs:{prop:"spuSaleAttrValueList",label:"属性值名称列表",width:"width"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t._l(s.spuSaleAttrValueList,(function(e,r){return a("el-tag",{key:e.id,attrs:{closable:"","disable-transitions":!1},on:{close:function(t){return s.spuSaleAttrValueList.splice(r,1)}}},[t._v(" "+t._s(e.saleAttrValueName)+" ")])})),s.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(e){return t.handleInputConfirm(s)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(s)}},model:{value:s.inputValue,callback:function(e){t.$set(s,"inputValue",e)},expression:"row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(e){return t.showInput(s)}}},[t._v("+ 添加")])]}}])}),a("el-table-column",{attrs:{prop:"prop",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.$index;return[a("MyButton",{attrs:{icon:"el-icon-delete",title:"删除",type:"danger",size:"mini"},on:{click:function(e){return t.spuForm.spuSaleAttrList.splice(s,1)}}})]}}])})],1),a("el-button",{attrs:{type:"primary"},on:{click:t.saveInfo}},[t._v("保存")]),a("el-button",{on:{click:t.cancel}},[t._v("取消")])],1)],1)],1)},u=[];function o(t){if(Array.isArray(t))return t}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function c(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var s,r,i,n,l=[],u=!0,o=!1;try{if(i=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;u=!1}else for(;!(u=(s=i.call(a)).done)&&(l.push(s.value),l.length!==e);u=!0);}catch(c){o=!0,r=c}finally{try{if(!u&&null!=a["return"]&&(n=a["return"](),Object(n)!==n))return}finally{if(o)throw r}}return l}}var d=a("06c5");function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(t,e){return o(t)||c(t,e)||Object(d["a"])(t,e)||p()}a("4de4"),a("b0c0"),a("159b"),a("d81d"),a("498a");var f={name:"spuForm",data:function(){return{spuForm:{category3Id:"",spuName:"",tmId:"",description:"",id:"",spuImageList:[],spuSaleAttrList:[]},spuImageList:[],trademarkList:[],baseSaleAttrList:[],spuSaleAttrIdAndName:"",dialogImageUrl:"",dialogVisible:!1}},computed:{unUsedSpuSaleAttrList:function(){var t=this;return this.baseSaleAttrList.filter((function(e){return t.spuForm.spuSaleAttrList.every((function(t){return e.name!==t.saleAttrName}))}))}},methods:{initUpdateFormData:function(t){var e=this;return Object(n["a"])(Object(i["a"])().mark((function a(){var s,r,n,l,u;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$API.spu.getSpuById(t);case 2:return s=a.sent,200===s.code&&(e.spuForm=s.data),a.next=6,e.$API.spu.getSpuImageList(t);case 6:return r=a.sent,200===r.code&&(n=r.data,n.forEach((function(t){t.name=t.imgName,t.url=t.imgUrl})),e.spuImageList=n),a.next=10,e.$API.trademark.getTrademarkList();case 10:return l=a.sent,200===l.code&&(e.trademarkList=l.data),a.next=14,e.$API.spu.getBaseSaleAttrList();case 14:u=a.sent,200===u.code&&(e.baseSaleAttrList=u.data);case 16:case"end":return a.stop()}}),a)})))()},initAddSpuFormData:function(t){var e=this;return Object(n["a"])(Object(i["a"])().mark((function a(){var s,r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.spuForm.category3Id=t,a.next=3,e.$API.trademark.getTrademarkList();case 3:return s=a.sent,200===s.code&&(e.trademarkList=s.data),a.next=7,e.$API.spu.getBaseSaleAttrList();case 7:r=a.sent,200===r.code&&(e.baseSaleAttrList=r.data);case 9:case"end":return a.stop()}}),a)})))()},cancel:function(){this.$emit("update:visible",!1),this.resetSpuForm(),this.$emit("cancelBack")},saveInfo:function(){var t=this;return Object(n["a"])(Object(i["a"])().mark((function e(){var a,s,r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.spuForm,s=t.spuImageList,a.spuSaleAttrList=a.spuSaleAttrList.map((function(t){return delete t.inputValue,delete t.inputVisible,t})),s=s.map((function(t){return{imgName:t.name,imgUrl:t.imgUrl||t.response.data}})),a.spuImageList=s,e.next=6,t.$API.spu.addOrUpdate(a);case 6:r=e.sent;try{t.$message.success("保存成功"),t.$emit("update:visible",!1),t.$emit("successBack"),t.resetSpuForm()}catch(i){console.log(i),t.$message.error("保存失败!"),console.log(r)}case 8:case"end":return e.stop()}}),e)})))()},resetSpuForm:function(){this.spuForm={category3Id:"",spuName:"",tmId:"",description:"",id:"",spuImageList:[],spuSaleAttrList:[]},this.spuImageList=[],this.trademarkList=[],this.baseSaleAttrList=[],this.spuSaleAttrIdAndName="",this.dialogImageUrl="",this.dialogVisible=!1},addAttrValue:function(){var t=this.spuSaleAttrIdAndName.split(":"),e=m(t,2),a=e[0],s=e[1];this.spuForm.spuSaleAttrList.push({baseSaleAttrId:a,saleAttrName:s,spuSaleAttrValueList:[]}),this.spuSaleAttrIdAndName=""},upfileSuccess:function(t,e,a){200===t.code?this.spuImageList=a:this.$message.error("上传文件失败!")},handleRemove:function(t,e){this.spuImageList=e},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},showInput:function(t){var e=this;this.$set(t,"inputVisible",!0),this.$nextTick((function(t){e.$refs.saveTagInput.focus()}))},handleInputConfirm:function(t){try{var e=t.inputValue,a=t.baseSaleAttrId;if(!e.trim())return t.inputValue="",void this.$message.info("请输入有效的属性名称!");var s=t.spuSaleAttrValueList.some((function(t){return t.saleAttrValueName===e}));if(s)return void this.$message.info("请勿输入重复的属性名称!");var r={baseSaleAttrId:a,saleAttrValueName:e};t.spuSaleAttrValueList.push(r),t.inputVisible=!1,t.inputValue=""}catch(i){this.$message.error("请完成当前操作后再做其他处理!")}}}},h=f,g=(a("6360"),a("2877")),b=Object(g["a"])(h,l,u,!1,null,"b3eb3ef2",null),S=b.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{attrs:{model:t.skuForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"SPU 名称"}},[t._v(" "+t._s(t.spu.spuName)+" ")]),a("el-form-item",{attrs:{label:"SKU 名称"}},[a("el-input",{attrs:{placeholder:"SKU 名称"},model:{value:t.skuForm.skuName,callback:function(e){t.$set(t.skuForm,"skuName",e)},expression:"skuForm.skuName"}})],1),a("el-form-item",{attrs:{label:"价格(元)"}},[a("el-input",{attrs:{placeholder:"SKU 价格",type:"number"},model:{value:t.skuForm.price,callback:function(e){t.$set(t.skuForm,"price",e)},expression:"skuForm.price"}})],1),a("el-form-item",{attrs:{label:"重量(千克)"}},[a("el-input",{attrs:{placeholder:"SKU 重量",type:"number"},model:{value:t.skuForm.weight,callback:function(e){t.$set(t.skuForm,"weight",e)},expression:"skuForm.weight"}})],1),a("el-form-item",{attrs:{label:"规格描述"}},[a("el-input",{attrs:{placeholder:"SKU 规格描述",type:"textarea",rows:"4"},model:{value:t.skuForm.skuDesc,callback:function(e){t.$set(t.skuForm,"skuDesc",e)},expression:"skuForm.skuDesc"}})],1),a("el-form-item",{attrs:{label:"平台属性"}},[a("el-form",{attrs:{inline:"","label-width":"80px"}},t._l(t.attrInfoList,(function(e){return a("el-form-item",{key:e.id,staticStyle:{margin:"5px 0px"},attrs:{label:e.attrName}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.attrIdAndValueId,callback:function(a){t.$set(e,"attrIdAndValueId",a)},expression:"attr.attrIdAndValueId"}},t._l(e.attrValueList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.valueName,value:e.id+":"+t.id}})})),1)],1)})),1)],1),a("el-form-item",{attrs:{label:"销售属性"}},[a("el-form",{attrs:{inline:"","label-width":"80px"}},t._l(t.spuSaleAttrList,(function(e){return a("el-form-item",{key:e.id,attrs:{label:e.saleAttrName}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.saleIdAndsaleAttrId,callback:function(a){t.$set(e,"saleIdAndsaleAttrId",a)},expression:"spuSaleAttr.saleIdAndsaleAttrId"}},t._l(e.spuSaleAttrValueList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.saleAttrValueName,value:e.id+":"+t.id}})})),1)],1)})),1)],1),a("el-form-item",{attrs:{label:"图片列表"}},[a("el-table",{staticStyle:{width:"100%",margin:"0 0 20px 0"},attrs:{data:t.spuImageList,border:""},on:{"selection-change":t.handelSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),a("el-table-column",{attrs:{label:"图片",width:"width"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.imgUrl}})]}}])}),a("el-table-column",{attrs:{label:"名称",prop:"imgName",width:"width"}}),a("el-table-column",{attrs:{label:"操作",width:"width"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return["0"===s.isDefault?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.setDefaultImage(s)}}},[t._v("设为默认")]):a("el-tag",{attrs:{type:"success",size:"mini"}},[t._v("默认")])]}}])})],1),a("el-button",{attrs:{type:"primary"},on:{click:t.saveInfo}},[t._v("保存")]),a("el-button",{on:{click:t.cancel}},[t._v("取消")])],1)],1)],1)},k=[],v=(a("13d5"),{name:"SKUForm",data:function(){return{skuForm:{category3Id:"",tmId:"",spuId:"",price:"",skuDesc:"",skuName:"",weight:"",skuDefaultImg:"",skuAttrValueList:[],skuSaleAttrValueList:[],skuImageList:[]},spu:{},spuImageList:[],userSelectImageList:[],spuSaleAttrList:[],attrInfoList:[]}},methods:{cancel:function(){this.resetData(),this.$emit("update:visible",!1)},resetData:function(){this.skuForm={category3Id:"",tmId:"",spuId:"",price:"",skuDesc:"",skuName:"",weight:"",skuDefaultImg:"",skuAttrValueList:[],skuSaleAttrValueList:[],skuImageList:[]},this.spu={},this.spuImageList=[],this.userSelectImageList=[],this.spuSaleAttrList=[],this.attrInfoList=[]},saveInfo:function(){var t=this;return Object(n["a"])(Object(i["a"])().mark((function e(){var a,s,r,n,l,u,o,c;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.skuForm,s=a.price,r=a.skuDesc,n=a.skuName,l=a.weight,s&&r&&n&&l){e.next=4;break}return t.$message.info("请输入完整的信息!"),e.abrupt("return");case 4:return u=t.attrInfoList,o=t.spuSaleAttrList,c=t.userSelectImageList,t.skuForm.skuAttrValueList=u.reduce((function(t,e){if(e.attrIdAndValueId){var a=e.attrIdAndValueId.split(":"),s=m(a,2),r=s[0],i=s[1];t.push({attrId:r,valueId:i})}return t}),[]),t.skuForm.skuSaleAttrValueList=o.reduce((function(t,e){if(e.saleIdAndsaleAttrId){var a=e.saleIdAndsaleAttrId.split(":"),s=m(a,2),r=s[0],i=s[1];t.push({saleAttrId:r,saleAttrValueId:i})}return t}),[]),t.skuForm.skuImageList=c.map((function(t){return{imgName:t.imgName,imgUrl:t.imgUrl,isDefault:t.isDefault,spuImgId:t.id}})),e.prev=8,e.next=11,t.$API.sku.saveSkuInfo(t.skuForm);case 11:e.sent,t.$message.success("保存成功!"),t.$emit("update:visible",!1),t.resetData(),e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](8),t.$message.error("保存失败!"),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[8,17]])})))()},setDefaultImage:function(t){this.spuImageList.forEach((function(t){return t.isDefault="0"})),t.isDefault="1",this.skuForm.skuDefaultImg=t.imgUrl},handelSelectionChange:function(t){this.userSelectImageList=t},initUpdateFormData:function(t,e,a){var s=this;this.spu=t,this.skuForm.category3Id=t.category3Id,this.skuForm.tmId=t.tmId,this.skuForm.spuId=t.id;var r=this.$API.sku.getSpuImageList(t.id),i=this.$API.sku.getSpuSaleAttrList(t.id),n=this.$API.attr.getCategoryList(e,a,t.category3Id);Promise.all([r,i,n]).then((function(t){var e=t[0].data;e.forEach((function(t){return t.isDefault="0"})),s.spuImageList=e,s.spuSaleAttrList=t[1].data,s.attrInfoList=t[2].data})).catch((function(t){s.$message.error(t.message||t.data)}))}}}),A=v,w=Object(g["a"])(A,I,k,!1,null,"23325c8c",null),y=w.exports,L={name:"Spu",data:function(){return{category1Id:"",category2Id:"",category3Id:"",isAddOrEditProperty:!1,page:1,limit:3,total:0,records:[],isSPUForm:!1,isSKUForm:!1,skuAttrInfo:[],showSKUInfoDialog:!1,selectSPU:{},loading:!0}},computed:{isShowCategoryList:function(){return!this.isSKUForm}},methods:{handelCloseDialog:function(t){this.loading=!0,this.skuAttrInfo=[],t()},showSPUList:function(t){var e=this;return Object(n["a"])(Object(i["a"])().mark((function a(){var s;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,e.showSKUInfoDialog=!0,e.selectSPU=t,a.prev=3,a.next=6,e.$API.sku.getSkuInfoFromSpuId(t.id);case 6:s=a.sent,e.loading=!1,e.skuAttrInfo=s.data,a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](3),e.$message.error("获取SKU失败!请重试!");case 14:case"end":return a.stop()}}),a,null,[[3,11]])})))()},deleteSpu:function(t){var e=this;return Object(n["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.$API.spu.remove(t);case 3:e.$message.success("删除成功!"),e.getAttrList(e.records.length>1?e.page:e.page-1),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),e.$message.error("删除失败!");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},cancelBackSPU:function(){this.spuId=null},successBackSPU:function(){this.spuId?this.getAttrList(this.page):this.getAttrList(),this.spuId=null},clickEditSPU:function(t){this.spuId=this.category3Id,this.isSPUForm=!0,this.$refs.spu.initUpdateFormData(t.id)},clickAddEditSPU:function(){this.isSPUForm=!0,this.$refs.spu.initAddSpuFormData(this.category3Id)},clickAddSKU:function(t){this.isSKUForm=!0,this.$refs.sku.initUpdateFormData(t,this.category1Id,this.category2Id)},changeLimit:function(t){this.limit=t,this.getAttrList()},getAttrList:function(){var t=arguments,e=this;return Object(n["a"])(Object(i["a"])().mark((function a(){var s,r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:1,e.page=s,a.prev=2,a.next=5,e.$API.spu.getList(e.page,e.limit,e.category3Id);case 5:r=a.sent,e.records=r.data.records,e.total=r.data.total,a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](2),console.log(a.t0),e.$message.error("获取列表失败!");case 14:case"end":return a.stop()}}),a,null,[[2,10]])})))()},changeCategory:function(t){t.category1Id?this.category1Id=t.category1Id:t.category2Id?this.category2Id=t.category2Id:t.category3Id&&(this.category3Id=t.category3Id,this.getAttrList())}},components:{SKUForm:y,SPUForm:S}},U=L,F=Object(g["a"])(U,s,r,!1,null,"20875816",null);e["default"]=F.exports},d58f:function(t,e,a){var s=a("1c0b"),r=a("7b0b"),i=a("44ad"),n=a("50c4"),l=function(t){return function(e,a,l,u){s(a);var o=r(e),c=i(o),d=n(o.length),p=t?d-1:0,m=t?-1:1;if(l<2)while(1){if(p in c){u=c[p],p+=m;break}if(p+=m,t?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:d>p;p+=m)p in c&&(u=a(u,c[p],p,o));return u}};t.exports={left:l(!1),right:l(!0)}}}]);